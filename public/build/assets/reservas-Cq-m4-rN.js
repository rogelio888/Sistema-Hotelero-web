import{z as c,j as s}from"./app-DWQ7THlv.js";const i=c("reservas",{state:()=>({reservas:[],reservaActual:null,loading:!1,error:null}),getters:{reservasConfirmadas:e=>e.reservas.filter(r=>r.estado==="CONFIRMADA"),reservasEnProceso:e=>e.reservas.filter(r=>r.estado==="EN_PROCESO"),reservasPendientes:e=>e.reservas.filter(r=>r.estado==="PENDIENTE")},actions:{async fetchReservas(e={}){this.loading=!0,this.error=null;try{const r=new URLSearchParams(e),a=await s.get(`/reservas?${r}`);a.data.success&&(this.reservas=a.data.data)}catch(r){throw this.error=r.response?.data?.message||"Error al cargar reservas",r}finally{this.loading=!1}},async fetchReserva(e){this.loading=!0,this.error=null;try{const r=await s.get(`/reservas/${e}`);if(r.data.success)return this.reservaActual=r.data.data,r.data.data}catch(r){throw this.error=r.response?.data?.message||"Error al cargar reserva",r}finally{this.loading=!1}},async createReserva(e){this.loading=!0,this.error=null;try{const r=await s.post("/reservas",e);if(r.data.success)return this.reservas.unshift(r.data.data),r.data}catch(r){throw this.error=r.response?.data?.message||"Error al crear reserva",r}finally{this.loading=!1}},async updateReserva(e,r){this.loading=!0,this.error=null;try{const a=await s.put(`/reservas/${e}`,r);if(a.data.success){const t=this.reservas.findIndex(o=>o.id===e);return t!==-1&&(this.reservas[t]=a.data.data),a.data}}catch(a){throw this.error=a.response?.data?.message||"Error al actualizar reserva",a}finally{this.loading=!1}},async confirmarReserva(e){try{const r=await s.post(`/reservas/${e}/confirmar`);if(r.data.success)return await this.fetchReserva(e),r.data}catch(r){throw r}},async checkIn(e){try{const r=await s.post(`/reservas/${e}/checkin`);if(r.data.success)return await this.fetchReserva(e),r.data}catch(r){throw r}},async checkOut(e){try{const r=await s.post(`/reservas/${e}/checkout`);if(r.data.success)return await this.fetchReserva(e),r.data}catch(r){throw r}},async cancelarReserva(e){try{const r=await s.delete(`/reservas/${e}`);if(r.data.success)return this.reservas=this.reservas.filter(a=>a.id!==e),r.data}catch(r){throw r}}}});export{i as u};
