import{z as o,j as i}from"./app-DWQ7THlv.js";const c=o("habitaciones",{state:()=>({habitaciones:[],habitacionActual:null,loading:!1,error:null}),getters:{habitacionesDisponibles:t=>t.habitaciones.filter(a=>a.estado==="DISPONIBLE"),habitacionesOcupadas:t=>t.habitaciones.filter(a=>a.estado==="OCUPADA"),habitacionesPorHotel:t=>a=>t.habitaciones.filter(s=>s.id_hotel===a)},actions:{async fetchHabitaciones(t={}){this.loading=!0,this.error=null;try{const a=new URLSearchParams(t),s=await i.get(`/habitaciones?${a}`);s.data.success&&(this.habitaciones=s.data.data)}catch(a){throw this.error=a.response?.data?.message||"Error al cargar habitaciones",a}finally{this.loading=!1}},async fetchHabitacionesDisponibles(t=null){try{const a=t?`?id_hotel=${t}`:"",s=await i.get(`/habitaciones-disponibles${a}`);if(s.data.success)return s.data.data}catch(a){throw a}},async fetchHabitacion(t){this.loading=!0,this.error=null;try{const a=await i.get(`/habitaciones/${t}`);if(a.data.success)return this.habitacionActual=a.data.data,a.data.data}catch(a){throw this.error=a.response?.data?.message||"Error al cargar habitaci贸n",a}finally{this.loading=!1}},async createHabitacion(t){this.loading=!0,this.error=null;try{const a=await i.post("/habitaciones",t);if(a.data.success)return this.habitaciones.push(a.data.data),a.data}catch(a){throw this.error=a.response?.data?.message||"Error al crear habitaci贸n",a}finally{this.loading=!1}},async updateHabitacion(t,a){this.loading=!0,this.error=null;try{const s=await i.put(`/habitaciones/${t}`,a);if(s.data.success){const e=this.habitaciones.findIndex(r=>r.id===t);return e!==-1&&(this.habitaciones[e]=s.data.data),s.data}}catch(s){throw this.error=s.response?.data?.message||"Error al actualizar habitaci贸n",s}finally{this.loading=!1}},async cambiarEstado(t,a){try{const s=await i.post(`/habitaciones/${t}/cambiar-estado`,{estado:a});if(s.data.success){const e=this.habitaciones.findIndex(r=>r.id===t);return e!==-1&&(this.habitaciones[e].estado=a),s.data}}catch(s){throw s}},async deleteHabitacion(t){this.loading=!0,this.error=null;try{const a=await i.delete(`/habitaciones/${t}`);if(a.data.success)return this.habitaciones=this.habitaciones.filter(s=>s.id!==t),a.data}catch(a){throw this.error=a.response?.data?.message||"Error al eliminar habitaci贸n",a}finally{this.loading=!1}}}});export{c as u};
