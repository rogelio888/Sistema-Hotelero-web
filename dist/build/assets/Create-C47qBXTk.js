import{r as u,h as T,c as a,a as t,w as M,d as q,e as i,s as n,p as m,F as c,A as v,l as A,v as x,t as d,i as w,m as k,j as S,q as D,o as l}from"./app-DWQ7THlv.js";import{u as O}from"./habitaciones-BXYPAQ8z.js";import{u as U}from"./hoteles-Cj_n2tFk.js";import{_ as V}from"./Button-AgtSY3Ng.js";/* empty css            */const $={class:"mb-6"},P={class:"bg-white rounded-lg shadow p-6 max-w-3xl"},j={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},F=["value"],L=["disabled"],R=["value"],G=["value"],_={class:"md:col-span-2"},z={key:0,class:"mt-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},J={class:"mt-6 flex items-center justify-end space-x-3"},h={__name:"Create",setup(K){const C=D(),I=O(),g=U(),s=u({id_hotel:"",id_piso:"",id_tipo:"",numero:"",estado:"DISPONIBLE",descripcion:""}),f=u([]),y=u([]),b=u(!1),p=u(null),N=async()=>{if(s.value.id_hotel)try{const r=await S.get(`/pisos?id_hotel=${s.value.id_hotel}`);r.data.success&&(f.value=r.data.data)}catch(r){console.error("Error al cargar pisos:",r)}},E=async()=>{try{const r=await S.get("/tipo-habitaciones?estado=ACTIVO");r.data.success&&(y.value=r.data.data)}catch(r){console.error("Error al cargar tipos:",r)}},H=async()=>{b.value=!0,p.value=null;try{await I.createHabitacion(s.value),C.push("/habitaciones")}catch(r){p.value=r.response?.data?.message||"Error al crear habitación"}finally{b.value=!1}},B=r=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(r);return T(()=>{g.fetchHoteles(),E()}),(r,e)=>(l(),a("div",null,[t("div",$,[t("button",{onClick:e[0]||(e[0]=o=>r.$router.back()),class:"text-blue-600 hover:text-blue-800 mb-4"}," ← Volver "),e[8]||(e[8]=t("h1",{class:"text-3xl font-bold text-gray-800"},"Crear Habitación",-1)),e[9]||(e[9]=t("p",{class:"text-gray-600 mt-1"},"Registra una nueva habitación",-1))]),t("div",P,[t("form",{onSubmit:M(H,["prevent"])},[t("div",j,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[n(" Hotel "),t("span",{class:"text-red-500"},"*")],-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.id_hotel=o),onChange:N,required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[e[10]||(e[10]=t("option",{value:""},"Selecciona un hotel",-1)),(l(!0),a(c,null,v(A(g).hotelesActivos,o=>(l(),a("option",{key:o.id,value:o.id},d(o.nombre),9,F))),128))],544),[[m,s.value.id_hotel]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[n(" Piso "),t("span",{class:"text-red-500"},"*")],-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.id_piso=o),required:"",disabled:!s.value.id_hotel,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[e[12]||(e[12]=t("option",{value:""},"Selecciona un piso",-1)),(l(!0),a(c,null,v(f.value,o=>(l(),a("option",{key:o.id,value:o.id}," Piso "+d(o.numero),9,R))),128))],8,L),[[m,s.value.id_piso]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[n(" Tipo de Habitación "),t("span",{class:"text-red-500"},"*")],-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.id_tipo=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[e[14]||(e[14]=t("option",{value:""},"Selecciona un tipo",-1)),(l(!0),a(c,null,v(y.value,o=>(l(),a("option",{key:o.id,value:o.id},d(o.nombre)+" - "+d(B(o.precio_base)),9,G))),128))],512),[[m,s.value.id_tipo]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[n(" Número de Habitación "),t("span",{class:"text-red-500"},"*")],-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.numero=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 101"},null,512),[[x,s.value.numero]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[n(" Estado "),t("span",{class:"text-red-500"},"*")],-1)),i(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.estado=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[17]||(e[17]=[t("option",{value:"DISPONIBLE"},"Disponible",-1),t("option",{value:"INACTIVA"},"Inactiva",-1),t("option",{value:"MANTENIMIENTO"},"Mantenimiento",-1)])],512),[[m,s.value.estado]])]),t("div",_,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Descripción ",-1)),i(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.descripcion=o),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Características especiales..."},null,512),[[x,s.value.descripcion]])])]),p.value?(l(),a("div",z,d(p.value),1)):q("",!0),t("div",J,[w(V,{type:"button",variant:"secondary",onClick:e[7]||(e[7]=o=>r.$router.back())},{default:k(()=>[...e[20]||(e[20]=[n(" Cancelar ",-1)])]),_:1}),w(V,{type:"submit",loading:b.value},{default:k(()=>[...e[21]||(e[21]=[n(" Guardar Habitación ",-1)])]),_:1},8,["loading"])])],32)])]))}};export{h as default};
