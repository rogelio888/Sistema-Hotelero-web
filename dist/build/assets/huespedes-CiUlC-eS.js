import{z as i,j as r}from"./app-DWQ7THlv.js";const h=i("huespedes",{state:()=>({huespedes:[],huespedActual:null,loading:!1,error:null}),getters:{huespedesActivos:s=>s.huespedes.filter(e=>e.estado==="ACTIVO")},actions:{async fetchHuespedes(s={}){this.loading=!0,this.error=null;try{const e=new URLSearchParams(s),a=await r.get(`/huespedes?${e}`);a.data.success&&(this.huespedes=a.data.data)}catch(e){throw this.error=e.response?.data?.message||"Error al cargar huéspedes",e}finally{this.loading=!1}},async fetchHuesped(s){this.loading=!0,this.error=null;try{const e=await r.get(`/huespedes/${s}`);if(e.data.success)return this.huespedActual=e.data.data,e.data.data}catch(e){throw this.error=e.response?.data?.message||"Error al cargar huésped",e}finally{this.loading=!1}},async buscarPorCi(s){try{const e=await r.post("/huespedes/buscar-ci",{ci:s});if(e.data.success)return e.data.data}catch(e){throw e}},async createHuesped(s){this.loading=!0,this.error=null;try{const e=await r.post("/huespedes",s);if(e.data.success)return this.huespedes.unshift(e.data.data),e.data}catch(e){throw this.error=e.response?.data?.message||"Error al crear huésped",e}finally{this.loading=!1}},async updateHuesped(s,e){this.loading=!0,this.error=null;try{const a=await r.put(`/huespedes/${s}`,e);if(a.data.success){const t=this.huespedes.findIndex(d=>d.id===s);return t!==-1&&(this.huespedes[t]=a.data.data),a.data}}catch(a){throw this.error=a.response?.data?.message||"Error al actualizar huésped",a}finally{this.loading=!1}},async deleteHuesped(s){this.loading=!0,this.error=null;try{const e=await r.delete(`/huespedes/${s}`);if(e.data.success)return this.huespedes=this.huespedes.filter(a=>a.id!==s),e.data}catch(e){throw this.error=e.response?.data?.message||"Error al eliminar huésped",e}finally{this.loading=!1}}}});export{h as u};
