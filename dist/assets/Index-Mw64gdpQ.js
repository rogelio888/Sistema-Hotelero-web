import{u as $,r as v,h as w,c as y,a as t,i as m,k as H,d as x,l as i,m as a,q as N,o as p,s as l,n as S,t as d}from"./index-CTzTmT_K.js";import{u as V}from"./huespedes-BqSkQYlh.js";import{_ as B}from"./Table-fkUJsl3I.js";import{_ as k}from"./Button-Dd-4xSWI.js";import{M as I}from"./Modal-ClueKbjA.js";const A={class:"flex items-center justify-between mb-6"},M={class:"flex items-center space-x-2"},P=["onClick"],T=["onClick"],D={class:"text-gray-700"},G={__name:"Index",setup(j){const b=N(),f=$(),u=V(),r=v(!1),n=v(null),c=v(!1),g=[{key:"id",label:"ID"},{key:"nombre",label:"Nombre Completo"},{key:"ci",label:"CI"},{key:"telefono",label:"TelÃ©fono"},{key:"email",label:"Email"},{key:"estado",label:"Estado"}],C=o=>{b.push(`/huespedes/${o}/editar`)},h=o=>{n.value=o,r.value=!0},_=async()=>{c.value=!0;try{await u.deleteHuesped(n.value.id),r.value=!1,n.value=null}catch{alert("Error al eliminar huÃ©sped")}finally{c.value=!1}};return w(()=>{u.fetchHuespedes()}),(o,e)=>(p(),y("div",null,[t("div",A,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-800"},"HuÃ©spedes"),t("p",{class:"text-gray-600 mt-1"},"Administra todos los huÃ©spedes registrados")],-1)),i(f).hasPermission("crear_huespedes")?(p(),H(k,{key:0,onClick:e[0]||(e[0]=s=>o.$router.push("/huespedes/crear"))},{default:a(()=>[...e[3]||(e[3]=[l(" âž• Nuevo HuÃ©sped ",-1)])]),_:1})):x("",!0)]),m(B,{columns:g,data:i(u).huespedes,loading:i(u).loading},{"cell-nombre":a(({item:s})=>[l(d(s.nombre)+" "+d(s.apellido),1)]),"cell-estado":a(({item:s})=>[t("span",{class:S(["px-3 py-1 rounded-full text-xs font-semibold",s.estado==="ACTIVO"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},d(s.estado),3)]),actions:a(({item:s})=>[t("div",M,[i(f).hasPermission("editar_huespedes")?(p(),y("button",{key:0,onClick:E=>C(s.id),class:"text-yellow-600 hover:text-yellow-800",title:"Editar"}," âœï¸ ",8,P)):x("",!0),i(f).hasPermission("eliminar_huespedes")?(p(),y("button",{key:1,onClick:E=>h(s),class:"text-red-600 hover:text-red-800",title:"Eliminar"}," ðŸ—‘ï¸ ",8,T)):x("",!0)])]),_:1},8,["data","loading"]),m(I,{show:r.value,onClose:e[2]||(e[2]=s=>r.value=!1),title:"Confirmar eliminaciÃ³n"},{footer:a(()=>[m(k,{variant:"secondary",onClick:e[1]||(e[1]=s=>r.value=!1)},{default:a(()=>[...e[7]||(e[7]=[l("Cancelar",-1)])]),_:1}),m(k,{variant:"danger",onClick:_,loading:c.value},{default:a(()=>[...e[8]||(e[8]=[l("Confirmar",-1)])]),_:1},8,["loading"])]),default:a(()=>[t("p",D,[e[5]||(e[5]=l(" Â¿EstÃ¡s seguro de inactivar al huÃ©sped ",-1)),t("strong",null,d(n.value?.nombre)+" "+d(n.value?.apellido),1),e[6]||(e[6]=l("? ",-1))])]),_:1},8,["show"])]))}};export{G as default};
