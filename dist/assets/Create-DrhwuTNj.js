import{r as m,g as f,h as y,c as n,a as t,e as s,p as w,F as k,A as h,v as l,i as M,m as V,y as C,w as S,H as c,q as N,o as i,t as p,s as q}from"./index-CTzTmT_K.js";const D={class:"p-6 max-w-2xl mx-auto"},E=["value"],U={class:"flex space-x-4"},B=["disabled"],T={__name:"Create",setup(F){const b=N(),u=m([]),a=m({id_habitacion:"",descripcion:"",fecha:new Date().toISOString().split("T")[0],costo:null}),d=f(()=>a.value.id_habitacion&&a.value.descripcion&&a.value.fecha),v=async()=>{try{const r=await c.get("/api/habitaciones");u.value=r.data.data}catch(r){console.error("Error al cargar habitaciones",r),alert("No se pudieron cargar las habitaciones")}},x=async()=>{if(!d.value){alert("Complete los campos obligatorios");return}try{await c.post("/api/mantenimientos",a.value),alert("Mantenimiento creado exitosamente"),b.push("/mantenimientos")}catch(r){console.error("Error al guardar mantenimiento",r),alert(r.response?.data?.message||"Error al crear el mantenimiento")}};return y(()=>{v()}),(r,e)=>{const g=C("router-link");return i(),n("div",D,[e[10]||(e[10]=t("h1",{class:"text-2xl font-bold mb-4"},"Nuevo Mantenimiento",-1)),t("form",{onSubmit:S(x,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Habitación *",-1)),s(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.id_habitacion=o),required:"",class:"w-full border border-gray-300 rounded p-2"},[e[4]||(e[4]=t("option",{value:""},"Seleccione una habitación",-1)),(i(!0),n(k,null,h(u.value,o=>(i(),n("option",{key:o.id,value:o.id},p(o.numero)+" - "+p(o.hotel?.nombre||""),9,E))),128))],512),[[w,a.value.id_habitacion]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Descripción *",-1)),s(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.descripcion=o),required:"",class:"w-full border border-gray-300 rounded p-2",rows:"3"},null,512),[[l,a.value.descripcion]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha *",-1)),s(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>a.value.fecha=o),required:"",class:"w-full border border-gray-300 rounded p-2"},null,512),[[l,a.value.fecha]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Costo (opcional)",-1)),s(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=o=>a.value.costo=o),min:"0",step:"0.01",class:"w-full border border-gray-300 rounded p-2"},null,512),[[l,a.value.costo,void 0,{number:!0}]])]),t("div",U,[t("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",disabled:!d.value}," Guardar ",8,B),M(g,{to:"/mantenimientos",class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded"},{default:V(()=>[...e[9]||(e[9]=[q(" Cancelar ",-1)])]),_:1})])],32)])}}};export{T as default};
