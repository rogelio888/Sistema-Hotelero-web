import{r as i,h as S,c as d,a as l,w as N,d as q,e as t,s as a,v as p,p as b,F as x,A as y,l as E,t as v,i as c,m as w,j as k,q as I,o as u}from"./index-CTzTmT_K.js";import{u as M}from"./hoteles-UglgslUa.js";import{_ as V}from"./Button-Dd-4xSWI.js";const T={class:"mb-6"},$={class:"bg-white rounded-lg shadow p-6 max-w-3xl"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},B=["value"],H=["value"],O={key:0,class:"mt-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},j={class:"mt-6 flex items-center justify-end space-x-3"},z={__name:"Create",setup(D){const C=I(),g=M(),s=i({nombre:"",apellido:"",usuario:"",password:"",id_rol:"",id_hotel:"",estado:"ACTIVO"}),f=i([]),m=i(!1),n=i(null),A=async()=>{try{const r=await k.get("/roles");r.data.success&&(f.value=r.data.data)}catch(r){console.error("Error al cargar roles:",r)}},U=async()=>{m.value=!0,n.value=null;try{(await k.post("/empleados",s.value)).data.success&&C.push("/empleados")}catch(r){n.value=r.response?.data?.message||r.response?.data?.errors?.usuario?.[0]||"Error al crear empleado"}finally{m.value=!1}};return S(()=>{g.fetchHoteles(),A()}),(r,e)=>(u(),d("div",null,[l("div",T,[l("button",{onClick:e[0]||(e[0]=o=>r.$router.back()),class:"text-blue-600 hover:text-blue-800 mb-4"}," ← Volver "),e[9]||(e[9]=l("h1",{class:"text-3xl font-bold text-gray-800"},"Crear Empleado",-1)),e[10]||(e[10]=l("p",{class:"text-gray-600 mt-1"},"Registra un nuevo empleado en el sistema",-1))]),l("div",$,[l("form",{onSubmit:N(U,["prevent"])},[l("div",R,[l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Nombre "),l("span",{class:"text-red-500"},"*")],-1)),t(l("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.nombre=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nombre"},null,512),[[p,s.value.nombre]])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Apellido "),l("span",{class:"text-red-500"},"*")],-1)),t(l("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.apellido=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Apellido"},null,512),[[p,s.value.apellido]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Usuario "),l("span",{class:"text-red-500"},"*")],-1)),t(l("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.usuario=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Usuario para login"},null,512),[[p,s.value.usuario]])]),l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Contraseña "),l("span",{class:"text-red-500"},"*")],-1)),t(l("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.password=o),type:"password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Mínimo 6 caracteres"},null,512),[[p,s.value.password]])]),l("div",null,[e[16]||(e[16]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Rol "),l("span",{class:"text-red-500"},"*")],-1)),t(l("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.id_rol=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[e[15]||(e[15]=l("option",{value:""},"Selecciona un rol",-1)),(u(!0),d(x,null,y(f.value,o=>(u(),d("option",{key:o.id,value:o.id},v(o.nombre),9,B))),128))],512),[[b,s.value.id_rol]])]),l("div",null,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Hotel ",-1)),t(l("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.id_hotel=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[e[17]||(e[17]=l("option",{value:""},"Sin asignar (Admin general)",-1)),(u(!0),d(x,null,y(E(g).hotelesActivos,o=>(u(),d("option",{key:o.id,value:o.id},v(o.nombre),9,H))),128))],512),[[b,s.value.id_hotel]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),t(l("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.estado=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[19]||(e[19]=[l("option",{value:"ACTIVO"},"Activo",-1),l("option",{value:"INACTIVO"},"Inactivo",-1)])],512),[[b,s.value.estado]])])]),n.value?(u(),d("div",O,v(n.value),1)):q("",!0),l("div",j,[c(V,{type:"button",variant:"secondary",onClick:e[8]||(e[8]=o=>r.$router.back())},{default:w(()=>[...e[21]||(e[21]=[a(" Cancelar ",-1)])]),_:1}),c(V,{type:"submit",loading:m.value},{default:w(()=>[...e[22]||(e[22]=[a(" Guardar Empleado ",-1)])]),_:1},8,["loading"])])],32)])]))}};export{z as default};
