import{u as A,r as u,h as H,c as p,a as t,i as c,k as I,d as b,l as r,m as s,e as N,p as S,q as D,o as m,s as n,n as O,t as h}from"./index-CTzTmT_K.js";import{u as T}from"./hoteles-UglgslUa.js";import{_ as R}from"./Table-fkUJsl3I.js";import{_ as x}from"./Button-Dd-4xSWI.js";import{M as B}from"./Modal-ClueKbjA.js";const M={class:"flex items-center justify-between mb-6"},P={class:"bg-white rounded-lg shadow p-4 mb-6"},j={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},q={class:"flex items-center space-x-2"},z=["onClick"],U=["onClick"],F=["onClick"],G={class:"text-gray-700"},Y={__name:"Index",setup(J){const y=D(),v=A(),i=T(),f=u({estado:""}),a=u(!1),d=u(null),g=u(!1),w=[{key:"id",label:"ID"},{key:"nombre",label:"Nombre"},{key:"direccion",label:"DirecciÃ³n"},{key:"ciudad",label:"Ciudad"},{key:"estado",label:"Estado"}],C=async()=>{try{await i.fetchHoteles(f.value)}catch(l){console.error("Error al cargar hoteles:",l)}},E=l=>{y.push(`/hoteles/${l}`)},_=l=>{y.push(`/hoteles/${l}/editar`)},$=l=>{d.value=l,a.value=!0},V=async()=>{g.value=!0;try{await i.deleteHotel(d.value.id),a.value=!1,d.value=null}catch{alert("Error al eliminar hotel")}finally{g.value=!1}};return H(()=>{C()}),(l,e)=>(m(),p("div",null,[t("div",M,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-800"},"Hoteles"),t("p",{class:"text-gray-600 mt-1"},"Administra todos los hoteles del sistema")],-1)),r(v).hasPermission("crear_hoteles")?(m(),I(x,{key:0,onClick:e[0]||(e[0]=o=>l.$router.push("/hoteles/crear"))},{default:s(()=>[...e[4]||(e[4]=[n(" âž• Nuevo Hotel ",-1)])]),_:1})):b("",!0)]),t("div",P,[t("div",j,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),N(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>f.value.estado=o),onChange:C,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[6]||(e[6]=[t("option",{value:""},"Todos",-1),t("option",{value:"ACTIVO"},"Activo",-1),t("option",{value:"INACTIVO"},"Inactivo",-1),t("option",{value:"CERRADO"},"Cerrado",-1)])],544),[[S,f.value.estado]])])])]),c(R,{columns:w,data:r(i).hoteles,loading:r(i).loading},{"cell-estado":s(({item:o})=>[t("span",{class:O(["px-3 py-1 rounded-full text-xs font-semibold",o?.estado==="ACTIVO"?"bg-green-100 text-green-800":o?.estado==="INACTIVO"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},h(o?.estado),3)]),actions:s(({item:o})=>[t("div",q,[t("button",{onClick:k=>E(o.id),class:"text-blue-600 hover:text-blue-800",title:"Ver detalles"}," ðŸ‘ï¸ ",8,z),r(v).hasPermission("editar_hoteles")?(m(),p("button",{key:0,onClick:k=>_(o.id),class:"text-yellow-600 hover:text-yellow-800",title:"Editar"}," âœï¸ ",8,U)):b("",!0),r(v).hasPermission("eliminar_hoteles")?(m(),p("button",{key:1,onClick:k=>$(o),class:"text-red-600 hover:text-red-800",title:"Eliminar"}," ðŸ—‘ï¸ ",8,F)):b("",!0)])]),_:1},8,["data","loading"]),c(B,{show:a.value,onClose:e[3]||(e[3]=o=>a.value=!1),title:"Confirmar eliminaciÃ³n"},{footer:s(()=>[c(x,{variant:"secondary",onClick:e[2]||(e[2]=o=>a.value=!1)},{default:s(()=>[...e[10]||(e[10]=[n("Cancelar",-1)])]),_:1}),c(x,{variant:"danger",onClick:V,loading:g.value},{default:s(()=>[...e[11]||(e[11]=[n("Confirmar",-1)])]),_:1},8,["loading"])]),default:s(()=>[t("p",G,[e[8]||(e[8]=n("Â¿EstÃ¡s seguro de cerrar el hotel ",-1)),t("strong",null,h(d.value?.nombre),1),e[9]||(e[9]=n("?",-1))]),e[12]||(e[12]=t("p",{class:"text-sm text-gray-500 mt-2"},'Esta acciÃ³n cambiarÃ¡ el estado del hotel a "CERRADO".',-1))]),_:1},8,["show"])]))}};export{Y as default};
