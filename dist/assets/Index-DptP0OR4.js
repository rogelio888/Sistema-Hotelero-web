import{u as q,r as n,h as z,c,a as o,i as p,k as j,d as S,l as C,m as r,e as i,p as b,o as u,s,n as G,t as g,v as P}from"./index-CTzTmT_K.js";import{u as J}from"./servicios-_dty0V2H.js";import{_ as K}from"./Table-fkUJsl3I.js";import{_ as I}from"./Button-Dd-4xSWI.js";import{M as N}from"./Modal-ClueKbjA.js";const L={class:"flex items-center justify-between mb-6"},Q={class:"bg-white rounded-lg shadow p-4 mb-6"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},X={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs"},Y={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs"},Z={class:"font-bold text-green-600"},_={class:"flex items-center space-x-2"},h=["onClick"],ee=["onClick"],oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le={class:"md:col-span-2"},te={class:"md:col-span-2"},ae={class:"mt-4 p-4 bg-blue-50 rounded-lg"},re={class:"text-xs text-blue-700 space-y-1"},se={key:0},ie={key:1},ne={key:2},ue={key:3},de={class:"text-gray-700"},ge={__name:"Index",setup(ce){const k=q(),v=J(),d=n({tipo:"",frecuencia:"",estado:""}),A=n(!1),x=n(!1),y=n(!1),m=n(null),O=n(!1),w=n(!1),t=n({nombre:"",descripcion:"",tipo:"",frecuencia:"",precio:0,estado:"ACTIVO"}),T=[{key:"nombre",label:"Nombre"},{key:"tipo",label:"Tipo"},{key:"frecuencia",label:"Frecuencia"},{key:"precio",label:"Precio"},{key:"estado",label:"Estado"}],f=async()=>{try{await v.fetchServicios(d.value)}catch(a){console.error("Error al cargar servicios:",a)}},U=()=>{y.value=!1,t.value={nombre:"",descripcion:"",tipo:"",frecuencia:"",precio:0,estado:"ACTIVO"},A.value=!0},V=a=>{y.value=!0,m.value=a,t.value={nombre:a.nombre,descripcion:a.descripcion||"",tipo:a.tipo,frecuencia:a.frecuencia,precio:a.precio,estado:a.estado},A.value=!0},E=()=>{A.value=!1,m.value=null},D=async()=>{O.value=!0;try{y.value?await v.updateServicio(m.value.id,t.value):await v.createServicio(t.value),E(),await f()}catch{alert("Error al guardar servicio")}finally{O.value=!1}},R=a=>{m.value=a,x.value=!0},B=async()=>{w.value=!0;try{await v.deleteServicio(m.value.id),x.value=!1,await f()}catch(a){alert(a.response?.data?.message||"Error al eliminar servicio")}finally{w.value=!1}},M=a=>({PERSONA:"Por Persona",HABITACION:"Por HabitaciÃ³n",ESTANCIA:"Por Estancia"})[a]||a,H=a=>({DIARIO:"Diario",UNICO:"Ãšnico",POR_USO:"Por Uso"})[a]||a,F=a=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(a);return z(()=>{f()}),(a,e)=>(u(),c("div",null,[o("div",L,[e[12]||(e[12]=o("div",null,[o("h1",{class:"text-3xl font-bold text-gray-800"},"Servicios"),o("p",{class:"text-gray-600 mt-1"},"Administra todos los servicios del hotel")],-1)),C(k).hasPermission("crear_servicios")?(u(),j(I,{key:0,onClick:U},{default:r(()=>[...e[11]||(e[11]=[s(" âž• Nuevo Servicio ",-1)])]),_:1})):S("",!0)]),o("div",Q,[o("div",W,[o("div",null,[e[14]||(e[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1)),i(o("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.tipo=l),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[13]||(e[13]=[o("option",{value:""},"Todos",-1),o("option",{value:"PERSONA"},"Por Persona",-1),o("option",{value:"HABITACION"},"Por HabitaciÃ³n",-1),o("option",{value:"ESTANCIA"},"Por Estancia",-1)])],544),[[b,d.value.tipo]])]),o("div",null,[e[16]||(e[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Frecuencia",-1)),i(o("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.frecuencia=l),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[15]||(e[15]=[o("option",{value:""},"Todos",-1),o("option",{value:"DIARIO"},"Diario",-1),o("option",{value:"UNICO"},"Ãšnico",-1),o("option",{value:"POR_USO"},"Por Uso",-1)])],544),[[b,d.value.frecuencia]])]),o("div",null,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),i(o("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.estado=l),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[17]||(e[17]=[o("option",{value:""},"Todos",-1),o("option",{value:"ACTIVO"},"Activo",-1),o("option",{value:"INACTIVO"},"Inactivo",-1)])],544),[[b,d.value.estado]])])])]),p(K,{columns:T,data:C(v).servicios,loading:C(v).loading},{"cell-tipo":r(({item:l})=>[o("span",X,g(M(l.tipo)),1)]),"cell-frecuencia":r(({item:l})=>[o("span",Y,g(H(l.frecuencia)),1)]),"cell-precio":r(({item:l})=>[o("span",Z,g(F(l.precio)),1)]),"cell-estado":r(({item:l})=>[o("span",{class:G(["px-3 py-1 rounded-full text-xs font-semibold",l.estado==="ACTIVO"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},g(l.estado),3)]),actions:r(({item:l})=>[o("div",_,[C(k).hasPermission("editar_servicios")?(u(),c("button",{key:0,onClick:$=>V(l),class:"text-yellow-600 hover:text-yellow-800",title:"Editar"}," âœï¸ ",8,h)):S("",!0),C(k).hasPermission("eliminar_servicios")?(u(),c("button",{key:1,onClick:$=>R(l),class:"text-red-600 hover:text-red-800",title:"Eliminar"}," ðŸ—‘ï¸ ",8,ee)):S("",!0)])]),_:1},8,["data","loading"]),p(N,{show:A.value,onClose:E,title:y.value?"Editar Servicio":"Nuevo Servicio",size:"lg"},{footer:r(()=>[p(I,{variant:"secondary",onClick:E},{default:r(()=>[...e[31]||(e[31]=[s("Cancelar",-1)])]),_:1}),p(I,{onClick:D,loading:O.value},{default:r(()=>[s(g(y.value?"Actualizar":"Guardar"),1)]),_:1},8,["loading"])]),default:r(()=>[o("div",oe,[o("div",le,[e[19]||(e[19]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[s(" Nombre "),o("span",{class:"text-red-500"},"*")],-1)),i(o("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.nombre=l),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Desayuno Buffet"},null,512),[[P,t.value.nombre]])]),o("div",te,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"DescripciÃ³n",-1)),i(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.descripcion=l),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"DescripciÃ³n del servicio..."},null,512),[[P,t.value.descripcion]])]),o("div",null,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[s(" Tipo "),o("span",{class:"text-red-500"},"*")],-1)),i(o("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.tipo=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[21]||(e[21]=[o("option",{value:""},"Selecciona",-1),o("option",{value:"PERSONA"},"Por Persona",-1),o("option",{value:"HABITACION"},"Por HabitaciÃ³n",-1),o("option",{value:"ESTANCIA"},"Por Estancia",-1)])],512),[[b,t.value.tipo]]),e[23]||(e[23]=o("p",{class:"text-xs text-gray-500 mt-1"},"Define cÃ³mo se cobra el servicio",-1))]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[s(" Frecuencia "),o("span",{class:"text-red-500"},"*")],-1)),i(o("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.frecuencia=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[24]||(e[24]=[o("option",{value:""},"Selecciona",-1),o("option",{value:"DIARIO"},"Diario",-1),o("option",{value:"UNICO"},"Ãšnico",-1),o("option",{value:"POR_USO"},"Por Uso",-1)])],512),[[b,t.value.frecuencia]]),e[26]||(e[26]=o("p",{class:"text-xs text-gray-500 mt-1"},"Define cuÃ¡ndo se cobra",-1))]),o("div",null,[e[27]||(e[27]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[s(" Precio "),o("span",{class:"text-red-500"},"*")],-1)),i(o("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.precio=l),type:"number",step:"0.01",min:"0",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"},null,512),[[P,t.value.precio,void 0,{number:!0}]])]),o("div",null,[e[29]||(e[29]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),i(o("select",{"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.estado=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...e[28]||(e[28]=[o("option",{value:"ACTIVO"},"Activo",-1),o("option",{value:"INACTIVO"},"Inactivo",-1)])],512),[[b,t.value.estado]])])]),o("div",ae,[e[30]||(e[30]=o("p",{class:"text-sm font-medium text-blue-800 mb-2"},"ðŸ’¡ Ejemplo de aplicaciÃ³n:",-1)),o("ul",re,[t.value.tipo==="PERSONA"&&t.value.frecuencia==="DIARIO"?(u(),c("li",se," âœ“ Se cobrarÃ¡ por cada persona, cada dÃ­a de la estadÃ­a ")):t.value.tipo==="HABITACION"&&t.value.frecuencia==="DIARIO"?(u(),c("li",ie," âœ“ Se cobrarÃ¡ por cada habitaciÃ³n, cada dÃ­a de la estadÃ­a ")):t.value.tipo==="ESTANCIA"&&t.value.frecuencia==="UNICO"?(u(),c("li",ne," âœ“ Se cobrarÃ¡ una sola vez por toda la estadÃ­a ")):t.value.frecuencia==="POR_USO"?(u(),c("li",ue," âœ“ Se cobrarÃ¡ cada vez que se registre un consumo ")):S("",!0)])])]),_:1},8,["show","title"]),p(N,{show:x.value,onClose:e[10]||(e[10]=l=>x.value=!1),title:"Confirmar eliminaciÃ³n"},{footer:r(()=>[p(I,{variant:"secondary",onClick:e[9]||(e[9]=l=>x.value=!1)},{default:r(()=>[...e[34]||(e[34]=[s("Cancelar",-1)])]),_:1}),p(I,{variant:"danger",onClick:B,loading:w.value},{default:r(()=>[...e[35]||(e[35]=[s("Confirmar",-1)])]),_:1},8,["loading"])]),default:r(()=>[o("p",de,[e[32]||(e[32]=s(" Â¿EstÃ¡s seguro de eliminar el servicio ",-1)),o("strong",null,g(m.value?.nombre),1),e[33]||(e[33]=s("? ",-1))])]),_:1},8,["show"])]))}};export{ge as default};
