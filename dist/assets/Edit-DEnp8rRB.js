import{x as w,r as b,g as h,h as k,c as n,a as t,e as s,p as M,F as E,A as V,v as i,i as _,m as C,y as N,w as q,H as l,q as z,o as u,t as v,s as U}from"./index-CTzTmT_K.js";const B={class:"p-6 max-w-2xl mx-auto"},D=["value"],F={class:"flex space-x-4"},H=["disabled"],T={__name:"Edit",setup(S){const d=z(),c=w().params.id,m=b([]),a=b({id_habitacion:"",descripcion:"",fecha:"",costo:null}),p=h(()=>a.value.id_habitacion&&a.value.descripcion&&a.value.fecha),g=async()=>{try{const r=await l.get("/api/habitaciones");m.value=r.data.data}catch(r){console.error("Error al cargar habitaciones",r),alert("No se pudieron cargar las habitaciones")}},x=async()=>{try{const e=(await l.get(`/api/mantenimientos/${c}`)).data.data;a.value.id_habitacion=e.id_habitacion,a.value.descripcion=e.descripcion,a.value.fecha=e.fecha,a.value.costo=e.costo}catch(r){console.error("Error al cargar mantenimiento",r),alert("No se pudo cargar el mantenimiento"),d.push("/mantenimientos")}},f=async()=>{if(!p.value){alert("Complete los campos obligatorios");return}try{await l.put(`/api/mantenimientos/${c}`,a.value),alert("Mantenimiento actualizado"),d.push("/mantenimientos")}catch(r){console.error("Error al actualizar",r),alert(r.response?.data?.message||"Error al actualizar")}};return k(()=>{g(),x()}),(r,e)=>{const y=N("router-link");return u(),n("div",B,[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold mb-4"},"Editar Mantenimiento",-1)),t("form",{onSubmit:q(f,["prevent"]),class:"space-y-4"},[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Habitación *",-1)),s(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.id_habitacion=o),required:"",class:"w-full border border-gray-300 rounded p-2",disabled:""},[(u(!0),n(E,null,V(m.value,o=>(u(),n("option",{key:o.id,value:o.id},v(o.numero)+" - "+v(o.hotel?.nombre||""),9,D))),128))],512),[[M,a.value.id_habitacion]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Descripción *",-1)),s(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.descripcion=o),required:"",class:"w-full border border-gray-300 rounded p-2",rows:"3"},null,512),[[i,a.value.descripcion]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha *",-1)),s(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>a.value.fecha=o),required:"",class:"w-full border border-gray-300 rounded p-2"},null,512),[[i,a.value.fecha]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Costo (opcional)",-1)),s(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=o=>a.value.costo=o),min:"0",step:"0.01",class:"w-full border border-gray-300 rounded p-2"},null,512),[[i,a.value.costo,void 0,{number:!0}]])]),t("div",F,[t("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",disabled:!p.value}," Guardar cambios ",8,H),_(y,{to:"/mantenimientos",class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded"},{default:C(()=>[...e[8]||(e[8]=[U(" Cancelar ",-1)])]),_:1})])],32)])}}};export{T as default};
