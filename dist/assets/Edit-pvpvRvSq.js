import{r as n,g as E,h as B,c as i,a as e,i as b,m as f,y as N,w as V,t as r,e as y,v as x,j as _,x as j,q as T,o as c,s as h}from"./index-CTzTmT_K.js";const q={class:"p-6"},z={class:"flex justify-between items-center mb-6"},M={class:"bg-white rounded-lg shadow p-6 max-w-2xl mx-auto"},R={key:0,class:"text-center py-8"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-gray-50 rounded-lg"},A={class:"mt-1 text-gray-900 font-medium"},D={class:"text-sm text-gray-600"},F={class:"mt-1 text-gray-900 font-medium"},G={class:"text-sm text-gray-600"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},I={class:"border-t pt-4 mt-4"},O={class:"flex justify-between items-center text-lg font-bold"},U={class:"text-blue-600"},$={class:"flex justify-end space-x-3"},J=["disabled"],P={__name:"Edit",setup(K){const m=j(),v=T(),d=n(!0),l=n(!1),a=n({}),o=n({fecha:"",cantidad:1}),w=E(()=>(a.value.servicio?.precio||0)*o.value.cantidad),p=s=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB"}).format(s),C=async()=>{d.value=!0;try{const s=await _.get(`/consumos/${m.params.id}`);a.value=s.data.data,o.value.fecha=a.value.fecha.split("T")[0],o.value.cantidad=a.value.cantidad}catch(s){console.error("Error al cargar consumo:",s),alert("Error al cargar la información del consumo"),v.push("/consumos")}finally{d.value=!1}},k=async()=>{l.value=!0;try{await _.put(`/consumos/${m.params.id}`,o.value),alert("Consumo actualizado exitosamente"),v.push("/consumos")}catch(s){console.error("Error al actualizar:",s),alert(s.response?.data?.message||"Error al actualizar el consumo")}finally{l.value=!1}};return B(()=>{C()}),(s,t)=>{const g=N("router-link");return c(),i("div",q,[e("div",z,[t[3]||(t[3]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Editar Consumo",-1)),b(g,{to:"/consumos",class:"text-gray-600 hover:text-gray-800"},{default:f(()=>[...t[2]||(t[2]=[h(" ← Volver ",-1)])]),_:1})]),e("div",M,[d.value?(c(),i("div",R,[...t[4]||(t[4]=[e("p",{class:"text-gray-500"},"Cargando información...",-1)])])):(c(),i("form",{key:1,onSubmit:V(k,["prevent"]),class:"space-y-6"},[e("div",S,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-500"},"Reserva",-1)),e("div",A," Hab. "+r(a.value.reserva?.habitacion?.numero||"N/A"),1),e("div",D,r(a.value.reserva?.huesped?.nombre||"Huésped desconocido"),1)]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-500"},"Servicio",-1)),e("div",F,r(a.value.servicio?.nombre||"N/A"),1),e("div",G,r(p(a.value.servicio?.precio||0)),1)])]),e("div",H,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fecha",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.value.fecha=u),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[x,o.value.fecha]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cantidad",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>o.value.cantidad=u),type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[x,o.value.cantidad,void 0,{number:!0}]])])]),e("div",I,[e("div",O,[t[9]||(t[9]=e("span",null,"Total:",-1)),e("span",U,r(p(w.value)),1)])]),e("div",$,[b(g,{to:"/consumos",class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},{default:f(()=>[...t[10]||(t[10]=[h(" Cancelar ",-1)])]),_:1}),e("button",{type:"submit",disabled:l.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},r(l.value?"Guardando...":"Guardar Cambios"),9,J)])],32))])])}}};export{P as default};
